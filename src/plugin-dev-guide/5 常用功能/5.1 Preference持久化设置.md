---
title: PreferenceæŒä¹…åŒ–è®¾ç½®
date: 2023-08-26 10:06:59
updated: 2023-07-20 16:51:54
---
5.1 PreferenceæŒä¹…åŒ–è®¾ç½®

# å…³äºPreference

Preferenceæ˜¯Zoteroæ’ä»¶çš„ä¸€ç§æŒä¹…åŒ–è®¾ç½®èƒ½åŠ›ã€‚ä¸å…¶ä»–ä»£ç è¿è¡Œç¯å¢ƒç›¸åŒï¼Œå˜é‡åœ¨Zoteroé‡å¯åä¼šè¢«é‡ç½®ï¼Œå› æ­¤å¯¹äºç”¨æˆ·çš„è®¾ç½®ç­‰éœ€è¦æŒä¹…å­˜å‚¨çš„å˜é‡ï¼Œé€šè¿‡Preferenceæ¥å­˜å–ã€‚

Preferenceä½äºZoteroé…ç½®æ–‡ä»¶ç›®å½•ï¼ˆåœ¨https://www.zotero.org/support/kb/profile_directoryæ ¹æ®ä½ ä½¿ç”¨çš„æ“ä½œç³»ç»ŸæŸ¥æ‰¾ï¼‰ä¸‹çš„prefs.jsã€‚é™¤ç‰¹æ®Šæƒ…å†µï¼Œè¯·å‹¿å¼•å¯¼ç”¨æˆ·ä¿®æ”¹è¯¥æ–‡ä»¶ã€‚

ğŸ’¡æ³¨æ„

Preferenceçš„å€¼æœ‰é•¿åº¦é™åˆ¶ï¼Œè¯·å‹¿è®¾ç½®å¤ªé•¿çš„å­—ç¬¦ä¸²ã€‚

# é»˜è®¤Preference

å…³äºå¦‚ä½•ä¸ºæ’ä»¶è®¾ç½®é»˜è®¤çš„Preferenceï¼Œè§[4.4 é»˜è®¤è®¾ç½®ï¼šdefaults/preferences/defaults.js](https://w6zjinn49j.feishu.cn/wiki/wikcnclzPNgl8yZNbw5IfvaDYif)

# é€šè¿‡é¦–é€‰é¡¹çª—å£è®¾ç½®Preference

åœ¨Zoteroä¸­ï¼Œæ‰“å¼€èœå•æ =>ç¼–è¾‘=>é¦–é€‰é¡¹=>é«˜çº§=>è®¾ç½®ç¼–è¾‘å™¨ã€‚å¯åœ¨å…¶ä¸­æœç´¢å¹¶è®¾ç½®Preferenceã€‚

<img src="https://cdn.nlark.com/yuque/0/2022/png/32594373/1662261200755-19bc14f5-d7b2-4057-a740-f24ee81018c4.png" width="834" id="u50fce8ac" class="ne-image">

# Preference API

ç”¨äºè¯»/å†™Preferenceã€‚

è¯·æ³¨æ„ï¼Œåœ¨é¡µé¢ç»‘å®šä»¥åŠè®¾ç½®ç¼–è¾‘å™¨ä¸­ï¼ŒPreferenceçš„é”®åä¸º`extensions.zotero.addonRef.key`ï¼Œè€Œåœ¨APIä¸­è°ƒç”¨æ—¶åªéœ€è¦`addonRef.key`ã€‚

æºç ä½ç½®ï¼š[chrome\\content\\zotero\\xpcom\\prefs.js](https://github.com/zotero/zotero/blob/master/chrome/content/zotero/xpcom/prefs.js)

## Zotero.Prefs.get

```
declare Zotero.Prefs.get = (pref: string, global: boolean = undefined) => boolean | string | number;
```

è¯»å–åç§°ä¸ºprefçš„Preferenceã€‚prefä¸ºPreferenceçš„é”®ï¼Œglobalä¸ºæ˜¯å¦æ˜¯å…¨å±€å‘½ååŸŸï¼Œé»˜è®¤å¦ã€‚

## ä¾‹ï¼š

æ­¤æ—¶`extensions.zotero.pdfpreview.enable`ä¸º`true`ã€‚

```
const tesfPref = Zotero.Prefs.get("pdfpreview.enable"); // true
```

## Zotero.Prefs.set

```
declare Zotero.Prefs.set = (pref: string, value: boolean | string | number, global: boolean = undefined) => any;
```

è®¾ç½®åç§°ä¸ºprefçš„Preferenceä¸ºvalueã€‚prefä¸ºPreferenceçš„é”®ï¼Œvalueä¸ºPreferenceçš„å€¼ï¼Œglobalä¸ºæ˜¯å¦æ˜¯å…¨å±€å‘½ååŸŸï¼Œé»˜è®¤å¦ã€‚

## ä¾‹ï¼š

æ­¤æ—¶`extensions.zotero.pdfpreview.enable`ä¸º`true`ï¼Œæ‰§è¡Œå®Œåä¸º`false`ã€‚

```
Zotero.Prefs.set("pdfpreview.enable", false);
const tesfPref = Zotero.Prefs.get("pdfpreview.enable"); // false
```

# Preferenceçª—å£ä¸ç•Œé¢å˜é‡ç»‘å®š

å…³äºå¦‚ä½•ä½¿ç”¨é¦–é€‰é¡¹Preferenceçª—å£ï¼Œè¯·å‚è§[6.2 ä½¿ç”¨Preferencesçª—å£æä¾›æ’ä»¶è®¾ç½®](https://w6zjinn49j.feishu.cn/wiki/wikcnTT6g3OF2WmYLl7noVv7dYg)

# å¦‚ä½•å°†å¯¹è±¡æŒä¹…åŒ–

ç”±äºPreferenceé™åˆ¶å€¼ç±»å‹ä¸ºå­—ç¬¦ä¸²ã€æ•°å­—æˆ–å¸ƒå°”ï¼Œå› æ­¤å¯å°†å¯¹è±¡ï¼ˆObjectï¼‰é€šè¿‡JSON.stringifyè½¬ä¸ºå­—ç¬¦ä¸²åå­˜å‚¨ï¼Œåœ¨è¯»å–æ—¶é€šè¿‡JSON.parseè½¬å›åŸå§‹æ ¼å¼ã€‚

è¯·æ³¨æ„ä¸è¦è¶…å‡ºé™åˆ¶çš„é•¿åº¦ã€‚å¦‚æœè¶…å‡ºé•¿åº¦ï¼Œä¼šåœ¨æ§åˆ¶å°æŠ¥warningï¼Œè¯·è€ƒè™‘å°†å¯¹è±¡å†…å®¹å†æ‹†åˆ†ã€‚